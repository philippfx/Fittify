@using Web.Models.Sport
@model List<Web.Models.Sport.WorkoutHistory>

@{
    ViewBag.Title = "Workout History";
}

<div>
    <h2>Your workout history for @Model.FirstOrDefault().Workout.Name</h2>
    <table class="table table-striped table-hover">
        <tr>
            <th>
                DateTime
            </th>
        </tr>
        @foreach (var workoutHistory in Model)
        {
            <tr>
            <td>
                <a href="~/Workout/HistoryDetails/@workoutHistory.Id">
                    @if (workoutHistory.DateTimeStartEnd != null)
                    {
                        <div>
                            @if (workoutHistory.DateTimeStartEnd.DateTimeStart != null)
                            {
                                @workoutHistory.DateTimeStartEnd.DateTimeStart.GetValueOrDefault().ToString("dd.MM.yyyy: hh:mm ' - '");
                            }
                            else
                            {
                                <div>Not started yet</div>
                            }

                            @if (workoutHistory.DateTimeStartEnd.DateTimeEnd != null)
                            {
                                @workoutHistory.DateTimeStartEnd.DateTimeEnd.GetValueOrDefault().ToString("hh:mm")
                            }
                            else
                            {
                                <span>Not ended yet</span>
                            }
                        </div>
                    }
                    else
                    {
                        <div>Not started yet</div>
                    }
                </a></td>
            </tr>

        }
    </table>
    <form action="~/Workout/CreateNew" method="post">
        <input name="workoutId" type="hidden" value="@Model.FirstOrDefault()?.Workout.Id"/>
        <input type="submit" value="Start new workout" class="btn btn-default"/>
    </form>
</div>